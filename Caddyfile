domain.com {

    reverse_proxy 10.10.0.2:8080 {
        header_up X-Forwarded-Proto https
        header_up X-Forwarded-Port 443
        header_up -X-Forwarded-Host
        header_up -X-Real-IP

        transport http {
            keepalive 30s
        }
    }

    encode gzip

    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options nosniff
        X-Frame-Options SAMEORIGIN
        Referrer-Policy strict-origin-when-cross-origin
        Content-Security-Policy "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; connect-src 'self'; font-src 'self'; object-src 'none'; base-uri 'self'; form-action 'self'; frame-ancestors 'self'"
        Permissions-Policy "camera=(), microphone=(), geolocation=(), payment=(), usb=(), interest-cohort=()"
        -Server
        -X-Powered-By
    }

    request_body {
        max_size 100MB
    }

    log {
        output file /var/log/caddy/access.log {
            roll_size 10mb
        }
    }
}
